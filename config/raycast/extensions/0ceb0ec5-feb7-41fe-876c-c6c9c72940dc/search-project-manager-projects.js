"use strict";var ce=Object.create;var C=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var fe=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t)=>{for(var n in t)C(e,n,{get:t[n],enumerable:!0})},$=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of le(t))!ue.call(e,o)&&o!==n&&C(e,o,{get:()=>t[o],enumerable:!(r=ae(t,o))||r.enumerable});return e};var x=(e,t,n)=>(n=e!=null?ce(fe(e)):{},$(t||!e||!e.__esModule?C(n,"default",{value:e,enumerable:!0}):n,e)),de=e=>$(C({},"__esModule",{value:!0}),e);var M=T(g=>{g.parse=g.decode=he;g.stringify=g.encode=q;g.safe=y;g.unsafe=w;var b=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`;function q(e,t){var n=[],r="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||{},t.whitespace=t.whitespace===!0);var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(s,c,f){var u=e[s];u&&Array.isArray(u)?u.forEach(function(p){r+=y(s+"[]")+o+y(p)+`
`}):u&&typeof u=="object"?n.push(s):r+=y(s)+o+y(u)+b}),t.section&&r.length&&(r="["+y(t.section)+"]"+b+r),n.forEach(function(s,c,f){var u=V(s).join("\\."),p=(t.section?t.section+".":"")+u,l=q(e[s],{section:p,whitespace:t.whitespace});r.length&&l.length&&(r+=b),r+=l}),r}function V(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(t){return t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function he(e){var t={},n=t,r=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,s=e.split(/[\r\n]+/g);return s.forEach(function(c,f,u){if(!(!c||c.match(/^\s*[;#]/))){var p=c.match(o);if(!!p){if(p[1]!==void 0){if(r=w(p[1]),r==="__proto__"){n={};return}n=t[r]=t[r]||{};return}var l=w(p[2]);if(l!=="__proto__"){var m=p[3]?w(p[4]):!0;switch(m){case"true":case"false":case"null":m=JSON.parse(m)}if(l.length>2&&l.slice(-2)==="[]"){if(l=l.substring(0,l.length-2),l==="__proto__")return;n[l]?Array.isArray(n[l])||(n[l]=[n[l]]):n[l]=[]}Array.isArray(n[l])?n[l].push(m):n[l]=m}}}}),Object.keys(t).filter(function(c,f,u){if(!t[c]||typeof t[c]!="object"||Array.isArray(t[c]))return!1;var p=V(c),l=t,m=p.pop(),k=m.replace(/\\\./g,".");return p.forEach(function(S,De,Fe){S!=="__proto__"&&((!l[S]||typeof l[S]!="object")&&(l[S]={}),l=l[S])}),l===t&&k===m?!1:(l[k]=t[c],!0)}).forEach(function(c,f,u){delete t[c]}),t}function B(e){return e.charAt(0)==='"'&&e.slice(-1)==='"'||e.charAt(0)==="'"&&e.slice(-1)==="'"}function y(e){return typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&B(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function w(e,t){if(e=(e||"").trim(),B(e)){e.charAt(0)==="'"&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch{}}else{for(var n=!1,r="",o=0,s=e.length;o<s;o++){var c=e.charAt(o);if(n)"\\;#".indexOf(c)!==-1?r+=c:r+="\\"+c,n=!1;else{if(";#".indexOf(c)!==-1)break;c==="\\"?n=!0:r+=c}}return n&&(r+="\\"),r.trim()}return e}});var J=T(($e,K)=>{"use strict";var N=require("fs"),G=require("os"),I=require("path");K.exports=function(e,t){typeof e!="string"&&(t=e,e=null);let n=Object.assign({cwd:process.cwd(),type:e},t),r;if(n.type==="global"?r=I.join(G.homedir(),".gitconfig"):r=I.resolve(n.cwd,".git/config"),!N.existsSync(r)){if(typeof n.type=="string")return null;r=I.join(G.homedir(),".config/git/config")}return N.existsSync(r)?r:null}});var X=T((qe,H)=>{"use strict";var E=require("fs"),me=require("os"),j=require("path"),W=require("util"),ge=M(),ye=J(),U=e=>e?e.replace(/^~/,me.homedir()):"",d=(e,t)=>(typeof e=="function"&&(t=e,e=null),typeof t!="function"?d.promise(e):d.promise(e).then(n=>t(null,n)).catch(t));d.promise=e=>{let t=d.resolveConfigPath(e),n=W.promisify(E.readFile),r=W.promisify(E.stat);return t?r(t).then(()=>n(t,"utf8")).then(o=>(e&&e.include===!0&&(o=Q(o,j.resolve(j.dirname(t)))),z(o,e))):Promise.resolve(null)};d.sync=e=>{let t=d.resolveConfigPath(e);if(t&&E.existsSync(t)){let n=E.readFileSync(t,"utf8");if(e&&e.include===!0){let r=j.resolve(j.dirname(t));n=Q(n,r)}return z(n,e)}return{}};d.resolveConfigPath=e=>{typeof e=="string"&&(e={type:e});let t=Object.assign({cwd:process.cwd()},e),n=t.path?U(t.path):ye(t.type);return n?j.resolve(t.cwd,n):null};d.resolve=e=>d.resolveConfigPath(e);d.expandKeys=e=>{for(let t of Object.keys(e)){let n=/(\S+) "(.*)"/.exec(t);if(!n)continue;let r=n[1];e[r]=e[r]||{},e[r][n[2]]=e[t],delete e[t]}return e};function z(e,t){let n=Object.assign({},t);e=e.replace(/\[(\S+) "(.*)"\]/g,(o,s,c)=>s&&c?`[${s} "${c.split(".").join("\\.")}"]`:o);let r=ge.parse(e);return n.expandKeys===!0?d.expandKeys(r):r}function Q(e,t){let n=e.split(`
`).filter(s=>s.trim()!==""),r=n.length,o=[];for(let s=0;s<r;s++){let c=n[s];if(c.indexOf("[include]")===0){let f=n[s+1].replace(/^\s*path\s*=\s*/,""),u=j.resolve(t,U(f));o.push(E.readFileSync(u))}else o.push(c)}return o.join(`
`)}H.exports=d});var Le={};pe(Le,{default:()=>ie});module.exports=de(Le);var i=require("@raycast/api"),te=require("child_process"),h=require("fs"),re=require("os"),ne=x(X()),R=require("path"),O=require("react");var _=x(require("node:path"),1),Z=x(require("node:os"),1),Y=Z.default.homedir();function L(e){let t=_.default.normalize(e)+_.default.sep;return(t.startsWith(Y)?t.replace(Y+_.default.sep,`~${_.default.sep}`):t).slice(0,-1)}var a=require("react/jsx-runtime"),P=(0,i.getPreferenceValues)(),D=P.gitClientAppPath||"",je=(0,h.existsSync)(D),F=P.terminalAppPath||"",Pe=(0,h.existsSync)(F),v=P.build,ee={Code:"com.microsoft.VSCode","Code - Insiders":"com.microsoft.VSCodeInsiders","VSCodium < 1.71":"com.visualstudio.code.oss",VSCodium:"com.vscodium"},Se=ee[v]??ee.Code,A=`${(0,re.homedir)()}/Library/Application Support/${v}/User/globalStorage/alefragnani.project-manager`,oe="vscode-remote://";function Ee(){let e=we()||A,t=`${e}/projects.json`,n=[`${e}/projects_cache_git.json`,`${e}/projects_cache_any.json`,`${e}/projects_cache_vscode.json`],r=[];if((0,h.existsSync)(t)){let o=JSON.parse((0,h.readFileSync)(t).toString());r.push(...o)}return n.forEach(o=>{(0,h.existsSync)(o)&&JSON.parse((0,h.readFileSync)(o).toString()).forEach(({name:c,fullPath:f})=>{r.find(({rootPath:u})=>u===f)||r.push({name:c,rootPath:f,tags:[],enabled:!0})})}),P.hideProjectsWithoutTag&&(r=r.filter(({tags:o})=>Array.isArray(o)&&o.length)),r}function _e(e){return e?.reduce((t,n)=>(n.tags?.forEach(r=>{t.includes(r)||t.push(r)}),t.sort((r,o)=>r.toLowerCase().localeCompare(o.toLowerCase()))),[])}var Ce=(e,t)=>e.filter(n=>t?n.tags?.find(r=>r===t):!0);function we(){let e=P.projectManagerDataPath;if(e&&(0,h.existsSync)(e)){let t=(0,h.lstatSync)(e);if(t.isDirectory())return e;if(t.isFile())return(0,R.dirname)(e)}}function Ae(e){return[...e].sort((n,r)=>n.name.localeCompare(r.name))}function ve(e){let t=new Map;return e.forEach(n=>{(n.tags?.length>0?n.tags:["[no tags]"]).forEach(o=>{let s=[];t.has(o)&&s.push(...t.get(o)||[]),s.push(n),t.set(o,s)})}),new Map([...t.entries()].sort())}function Oe(e){let t=ve(e),n=[];return t.forEach((r,o)=>{n.push((0,a.jsx)(i.List.Section,{title:o,children:r?.map((s,c)=>(0,a.jsx)(se,{...s},s.rootPath+c))},o))}),n}function ie(){let e=[],t=Ee(),n=_e(t),[r,o]=(0,O.useState)("");if(!t||t.length===0)return(0,a.jsx)(i.Detail,{markdown:`To use this extension, the Visual Studio Extension
      [Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager)
       is required.`});let s=Ae(t);if(P.groupProjectsByTag&&!r){let f=Oe(s);e.push(...f)}else Ce(s,r).forEach((f,u)=>{e.push((0,a.jsx)(se,{...f},f.rootPath+u))});let c=f=>{o(f)};return(0,a.jsx)(i.List,{searchBarPlaceholder:"Search projects ...",searchBarAccessory:n.length?(0,a.jsxs)(i.List.Dropdown,{tooltip:"Tags filter",onChange:c,defaultValue:void 0,children:[(0,a.jsx)(i.List.Dropdown.Section,{children:(0,a.jsx)(i.List.Dropdown.Item,{title:"All Tags",value:""},"0")}),(0,a.jsx)(i.List.Dropdown.Section,{title:"Tags",children:n.map((f,u)=>(0,a.jsx)(i.List.Dropdown.Item,{title:f,value:f},"tag-"+u))})]}):null,children:(0,a.jsx)(O.Fragment,{children:e})})}function se({name:e,rootPath:t,tags:n}){let r=t,o=L(r),s=(0,R.dirname)(o);return(0,a.jsx)(i.List.Item,{title:e,subtitle:s,icon:{fileIcon:r},keywords:n,accessories:[{text:n?.join(", ")}],actions:(0,a.jsxs)(i.ActionPanel,{children:[(0,a.jsxs)(i.ActionPanel.Section,{children:[be(r)?(0,a.jsx)(i.Action,{title:`Open in ${v} (Remote)`,icon:"command-icon.png",onAction:()=>{(0,te.exec)("code --remote "+Ie(r)),(0,i.closeMainWindow)()}}):(0,a.jsx)(i.Action.Open,{title:`Open in ${v}`,icon:"command-icon.png",target:r,application:Se}),Pe&&(0,a.jsx)(i.Action.Open,{title:"Open in Terminal",icon:{fileIcon:F},shortcut:{modifiers:["cmd"],key:"t"},target:r,application:F},"terminal"),je&&xe(r)&&(0,a.jsx)(i.Action.Open,{title:"Open in Git client",icon:{fileIcon:D},shortcut:{modifiers:["cmd"],key:"g"},target:r,application:D},"git-client"),(0,a.jsx)(i.Action.ShowInFinder,{path:r}),(0,a.jsx)(i.Action.OpenWith,{path:r,shortcut:{modifiers:["cmd"],key:"o"}})]}),(0,a.jsxs)(i.ActionPanel.Section,{children:[(0,a.jsx)(i.Action.CopyToClipboard,{title:"Copy Name",content:e,shortcut:{modifiers:["cmd"],key:"."}}),(0,a.jsx)(i.Action.CopyToClipboard,{title:"Copy Path",content:o,shortcut:{modifiers:["cmd","shift"],key:"."}})]}),(0,a.jsx)(i.ActionPanel.Section,{children:(0,a.jsx)(i.Action.Trash,{paths:[r],shortcut:{modifiers:["ctrl"],key:"x"}})}),(0,a.jsx)(Te,{})]})})}function Te(){return i.environment.isDevelopment?(0,a.jsxs)(i.ActionPanel.Section,{title:"Development",children:[(0,a.jsx)(i.Action.Open,{title:"Open projects.json File in Code",icon:"command-icon.png",target:A,application:"Visual Studio Code"}),(0,a.jsx)(i.Action.ShowInFinder,{title:"Show projects.json File in Finder",path:A}),(0,a.jsx)(i.Action.CopyToClipboard,{title:"Copy projects.json File Path",content:A})]}):null}function xe(e){return!!ne.default.sync({cwd:e,path:".git/config",expandKeys:!0}).core}function be(e){return e.startsWith(oe)}function Ie(e){e=e.slice(oe.length);let t=e.indexOf("/");return e.slice(0,t)+" "+e.slice(t)+"/"}0&&(module.exports={});
/*!
 * git-config-path <https://github.com/jonschlinkert/git-config-path>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * parse-git-config <https://github.com/jonschlinkert/parse-git-config>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
